{"version":3,"file":"index.js","sources":["../src/utility.js","../src/SlideshowLightbox.tsx","../src/AnimImage.tsx","../src/index.tsx"],"sourcesContent":["import { useState, useCallback, useEffect, useRef } from \"react\";\r\n\r\nexport const wrapNums = (minNum, maxNum, v) => {\r\n      let rangeSize = maxNum - minNum;\r\n      return ((((v - minNum) % rangeSize) + rangeSize) % rangeSize) + minNum;\r\n};\r\n\r\nexport const shouldAutoplay = (elem) => {\r\n  // Autoplay for HTML5 Video elems set to true by default\r\n  // Autoplay is off by default for YouTube embeds\r\n\r\n  if (elem.type == 'yt' && elem.autoPlay != true && elem.autoPlay != 'true') {\r\n    return false\r\n  } else if (elem.autoPlay == false || elem.autoPlay == 'false') {\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nexport const getVideoHeight = (elem) => {\r\n  if (elem.videoHeight) {\r\n    return elem.videoHeight\r\n  }\r\n  return \"200\"\r\n}\r\n\r\nexport const getVideoWidth = (elem) => {\r\n  if (elem.videoWidth) {\r\n    return elem.videoWidth\r\n  }\r\n  return \"900\"\r\n}\r\n\r\nexport const useInterval = (callback, timeDelay) => {\r\n      const savedCallbackRef = useRef();\r\n    \r\n      useEffect(() => {\r\n        savedCallbackRef.current = callback;\r\n      }, [callback]);\r\n    \r\n      useEffect(() => {\r\n        function tick() {\r\n          savedCallbackRef.current();\r\n        }\r\n        if (timeDelay !== null) {\r\n          // Set the interval\r\n          let intervalID = setInterval(tick, timeDelay);\r\n\r\n          // Remove the interval\r\n          return () => clearInterval(intervalID);\r\n        }\r\n      }, [timeDelay]);\r\n}\r\n\r\nexport const openFullScreen = (lightbox_elem) => {\r\n  if (lightbox_elem.requestFullscreen) {\r\n    lightbox_elem.requestFullscreen();\r\n  } \r\n\r\n  /* Safari */\r\n  else if (lightbox_elem.webkitRequestFullscreen) { \r\n    lightbox_elem.webkitRequestFullscreen();\r\n  } \r\n  \r\n  /* Internet Explorer */\r\n  else if (lightbox_elem.msRequestFullscreen) { \r\n    lightbox_elem.msRequestFullscreen();\r\n  }\r\n}\r\n\r\nexport const closeFullScreen = (document) => {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } \r\n\r\n  /* Safari */\r\n  else if (document.webkitExitFullscreen) { \r\n    document.webkitExitFullscreen();\r\n  } \r\n  \r\n  /* Internet Explorer */\r\n  else if (document.msExitFullscreen) { \r\n    document.msExitFullscreen();\r\n  }\r\n}\r\n\r\nexport const swipePower = (offset, velocity) => {\r\n    return Math.abs(offset) * velocity;\r\n};\r\n\r\nexport const isBrowser = () => typeof window !== \"undefined\"\r\n\r\n","import * as React from 'react'\r\nimport { useState, useEffect, useRef, useCallback, forwardRef, useImperativeHandle, ForwardRefExoticComponent} from 'react'\r\nimport { motion, AnimatePresence, AnimateSharedLayout, useIsPresent } from 'framer-motion'\r\nimport styles from './styles.module.css'\r\n\r\nimport {\r\n  wrapNums,\r\n  getVideoHeight,\r\n  getVideoWidth,\r\n  shouldAutoplay,\r\n} from './utility'\r\nimport {\r\n  ZoomIn,\r\n  ZoomOut,\r\n  Fullscreen,\r\n  PlayCircleFill,\r\n  Search,\r\n  Download,\r\n  PauseCircleFill,\r\n  FullscreenExit,\r\n  XLg,\r\n  GridFill\r\n} from 'react-bootstrap-icons'\r\nimport { ReactNode } from 'react';\r\nimport Magnifier from 'react-magnifier'\r\nimport { Portal } from 'react-portal'\r\nimport { TransformWrapper, TransformComponent, ReactZoomPanPinchRef, } from 'react-zoom-pan-pinch'\r\nimport { saveAs } from 'file-saver'\r\nimport Div100vh from 'react-div-100vh'\r\nimport KeyHandler from 'react-key-handler'\r\nimport { useInterval } from 'usehooks-ts'\r\nimport useEmblaCarousel from 'embla-carousel-react'\r\nimport YouTube from 'react-youtube';\r\nimport useResizeObserver from '@react-hook/resize-observer';\r\n\r\nlet thumbnailVariants: any = {\r\n  visible: { opacity: 1, y: 0 },\r\n  hidden: { opacity: 0, y: 100 }\r\n}\r\n\r\nconst themes: any = {\r\n  day: {\r\n    background: 'white',\r\n    iconColor: 'black',\r\n    thumbnailBorder: 'solid transparent 2px',\r\n    textColor: 'black'\r\n  },\r\n  night: {\r\n    background: '#151515',\r\n    iconColor: '#626b77',\r\n    thumbnailBorder: 'solid rgb(107, 133, 206)  2px',\r\n    textColor: '#626b77'\r\n  },\r\n  lightbox: {\r\n    background: 'rgba(12, 12, 12, 0.93)',\r\n    iconColor: '#626b77',\r\n    thumbnailBorder: 'solid rgb(107, 133, 206) 2px',\r\n    textColor: 'silver'\r\n  }\r\n}\r\n\r\n// const activeThumbnailBorder = 'solid rgba(107, 133, 206, 0.6) 2px'\r\nconst inactiveThumbnailBorder = 'solid transparent 2px'\r\n\r\nconst defaultTheme = 'night'\r\nconst mobileWidth = 768\r\n\r\ninterface SlideItem {\r\n  src?: any,\r\n  original?: string,\r\n  type?: string,\r\n  alt?: string,\r\n  loaded?: boolean\r\n}\r\n\r\ninterface ImageElement {\r\n  src?: any,\r\n  alt?: string,\r\n  loaded?: boolean,\r\n}\r\n\r\ntype SlideshowLightboxHandle = {\r\n  children?: ReactNode;\r\n  reset: () => void;\r\n};\r\n\r\nexport interface SlideshowLightboxProps {\r\n  children?: ReactNode;\r\n  ref?: any;\r\n  thumbnailBorder?: string;\r\n  magnifyingGlass? : boolean;\r\n  backgroundColor? : string;\r\n  theme? : string;\r\n  iconColor? : any;\r\n  fullScreen?: boolean;\r\n  showControls?: boolean;\r\n  disableImageZoom?: boolean;\r\n  slideshowInterval?: number;\r\n  showThumbnails?: boolean;\r\n  open?: boolean;\r\n  animateThumbnails?: boolean;\r\n  showFullScreenIcon?: boolean;\r\n  showThumbnailIcon?: boolean;\r\n  showSlideshowIcon?: boolean;\r\n  showMagnificationIcons?: boolean;\r\n  roundedImages?: boolean;\r\n  downloadImages?: boolean;\r\n  rtl?: boolean;\r\n  modalClose?: string;\r\n  framework?: string;\r\n  lightboxIdentifier?: string;\r\n  nextArrow?: any;\r\n  prevArrow?: any;\r\n  arrowStyle?: any;\r\n  showLoader?: boolean;\r\n  useCoverMode?: boolean;\r\n  rightArrowStyle?: any;\r\n  leftArrowStyle?: any;\r\n  imgAnimation?: string;\r\n  textColor?: string;\r\n  licenseKey?: string;\r\n  images?: any;\r\n  render?: any;\r\n  imageComponent?: boolean;\r\n  showArrows?: boolean;\r\n  lightboxImgClass?: string;\r\n  coverImageInLightbox?: boolean;\r\n  onOpen?: any;\r\n  onClose?: any;\r\n  onNext?: any;\r\n  onPrev?: any;\r\n  className?: string;\r\n  imgWrapperClassName?: string;\r\n  imgClassName?: string;\r\n  startingSlideIndex?: number;\r\n  showAllImages?: any;\r\n  rightArrowClassname?: string;\r\n  leftArrowClassname?: string;\r\n  displayedImages?: any;\r\n  captionStyle?: any;\r\n}\r\n\r\nexport const SlideshowLightbox: React.FC<SlideshowLightboxProps> = React.forwardRef<SlideshowLightboxHandle, SlideshowLightboxProps>((props, ref) => {\r\n\r\n  useImperativeHandle(\r\n    ref,\r\n    () => ({\r\n        reset() {\r\n          initImages(true, true)\r\n        }\r\n    })\r\n  )\r\n\r\n  const createCustomThumbnailBorder = (): string | void => {\r\n    if (props.thumbnailBorder) {\r\n      return `solid ${props.thumbnailBorder} 2px`\r\n    }\r\n  }\r\n\r\n  const [[imgSlideIndex, direction], setImgSlideIndex] = useState([0, 0])\r\n  const [showModal, setShowModal] = useState(false)\r\n  const [isSlideshowPlaying, setIsSlideshowPlaying] = useState(false)\r\n\r\n  const [emblaReinitialized, setEmblaReinitialized] = useState(false)\r\n\r\n  const [images, setImages] = useState<SlideItem[]>([]);\r\n\r\n  const [previewImageElems, setPreviewImageElems] = useState<any[]>([]);\r\n\r\n  const slideIndex = wrapNums(0, images.length, imgSlideIndex)\r\n\r\n  const [reactSwipeOptions, setReactSwipeOptions] = useState({\r\n    loop: true, \r\n    startIndex: 0,\r\n    active: true,  \r\n  })\r\n\r\n  let initialThumbnailOptions: any = {\r\n    startIndex: 0,\r\n    containScroll: 'keepSnaps',\r\n    dragFree: true\r\n  }\r\n\r\n  const [thumbnailSwipeOptions, setThumbnailSwipeOptions] = useState(initialThumbnailOptions)\r\n\r\n  const [carouselReady, setCarouselReady] = useState(false)\r\n\r\n  const [zoomedIn, setZoomedIn] = useState(false)\r\n\r\n  const [isOpen, setIsOpen] = useState(false)\r\n\r\n  const [prevFocusedElem, setPrevFocusedElem] = useState<HTMLElement | null>(null)\r\n  const [animationEntered, setAnimationEntered] = useState(false)\r\n\r\n  const [magnifyingGlassFeature, _setMagnifyingGlassFeature] = useState(\r\n    props.magnifyingGlass ? props.magnifyingGlass : false\r\n  )\r\n\r\n  const [disableZoom, setDisableZoom] = useState(\r\n    props.disableImageZoom ? props.disableImageZoom : false\r\n  )\r\n\r\n  const [slideshowInterval, setSlideshowInterval] = useState(\r\n    props.slideshowInterval ? props.slideshowInterval : 1700\r\n  )\r\n\r\n  const [rightArrowStyle, setRightArrowStyle] = useState(\r\n    props.rightArrowStyle ? props.rightArrowStyle : {}\r\n  )\r\n\r\n  const [leftArrowStyle, setLeftArrowStyle] = useState(\r\n    props.leftArrowStyle ? props.leftArrowStyle : {}\r\n  )\r\n\r\n  const [isRounded, setIsRounded] = useState(\r\n    props.roundedImages ? props.roundedImages : false\r\n  )\r\n\r\n  const [showControls, setShowControls] = useState<boolean>(\r\n    props.showControls ? props.showControls : true\r\n  )\r\n\r\n  const [displayFullScreenIcon, setDisplayFullScreenIcon] = useState<boolean>(\r\n    props.showFullScreenIcon ? props.showFullScreenIcon : true\r\n  )\r\n\r\n  const [displayThumbnailIcon, setDisplayThumbnailIcon] = useState<boolean>(\r\n    props.showThumbnailIcon ? props.showThumbnailIcon : true\r\n  )\r\n\r\n  const [displaySlideshowIcon, setDisplaySlideshowIcon] = useState<boolean>(\r\n    props.showSlideshowIcon ? props.showSlideshowIcon : true\r\n  )\r\n\r\n  const [displayMagnificationIcons, setDisplayMagnificationIcons] = useState<boolean>(\r\n    props.showMagnificationIcons ? props.showMagnificationIcons : true\r\n  )\r\n\r\n  const [nextArrowElem, setNextArrowElem] = useState(\r\n    props.nextArrow ? props.nextArrow : null\r\n  )\r\n\r\n  const [isImageComponent, setImageComponent] = useState(\r\n    props.imageComponent ? props.imageComponent : null\r\n  )\r\n\r\n  const [prevArrowElem, setPrevArrowElem] = useState(\r\n    props.prevArrow ? props.prevArrow : null\r\n  )\r\n\r\n  const [modalCloseOption, setModalCloseOption] = useState(\r\n    props.modalClose ? props.modalClose : \"default\"\r\n  )\r\n\r\n  const [showDownloadBtn, setShowDownloadBtn] = useState(\r\n    props.downloadImages ? props.downloadImages : false\r\n  )\r\n\r\n  const [isRTL, setIsRTL] = useState(props.rtl ? props.rtl : false)\r\n\r\n  const [frameworkID, setFrameworkID] = useState(\r\n    props.framework ? props.framework : ''\r\n  )\r\n  const [lightboxIdentifier, setLightboxIdentifier] = useState(\r\n    props.lightboxIdentifier ? props.lightboxIdentifier : false\r\n  )\r\n  const [imageFullScreen, setImageFullScreen] = useState(\r\n    props.fullScreen ? props.fullScreen : false\r\n  )\r\n  const [licenseKey, setLicenseKey] = useState(\r\n    props.licenseKey ? props.licenseKey : ''\r\n  )\r\n\r\n  const [displayLoader, setDisplayLoader] = useState(\r\n    props.showLoader ? props.showLoader : false\r\n  )\r\n\r\n  // Styling/theming\r\n  const [backgroundColor, setBackgroundColor] = useState(\r\n    props.backgroundColor\r\n      ? props.backgroundColor\r\n      : themes[defaultTheme].background\r\n  )\r\n  const [iconColor, setIconColor] = useState(\r\n    props.iconColor ? props.iconColor : null\r\n  )\r\n  const [textColor, setTextColor] = useState(\r\n    props.textColor ? props.textColor : themes[defaultTheme].textColor\r\n  )\r\n\r\n  const [coverMode, setCoverMode] = useState(\r\n    props.useCoverMode ? props.useCoverMode : false\r\n  )\r\n\r\n  const [thumbnailBorder, setThumbnailBorder] = useState(\r\n    props.thumbnailBorder\r\n      ? createCustomThumbnailBorder()\r\n      : themes[defaultTheme].thumbnailBorder\r\n  )\r\n\r\n  const [showThumbnails, setShowThumbnails] = useState(\r\n    props.showThumbnails ? props.showThumbnails : false\r\n  )\r\n  const [animatedThumbnails, setAnimatedThumbnails] = useState(\r\n    props.animateThumbnails ? props.animateThumbnails : true\r\n  )\r\n  const [imgAnimation, setImgAnimation] = useState(\r\n    props.imgAnimation ? props.imgAnimation : 'imgDrag'\r\n  )\r\n  const [arrowStyle, setArrowStyle] = useState(\r\n    props.arrowStyle ? props.arrowStyle : 'dark'\r\n  )\r\n\r\n  const [YTVideoCurrentlyPlaying, setYTVideoCurrentlyPlaying] = useState(false)\r\n\r\n  const [width, setWidth] = useState(0)\r\n\r\n  const [isBrowserFullScreen, setIsBrowserFullScreen] = useState(false)\r\n  const [enableMagnifyingGlass, setMagnifyingGlass] = useState(false)\r\n  const [imagesLoaded, setImagesLoaded] = useState(false)\r\n\r\n  const imageRef: React.RefObject<HTMLImageElement> = useRef(null)\r\n\r\n  const [zoomIdx, setZoomIdx] = useState(0)\r\n\r\n  const [imgContainHeight, setImgContainHeight] = useState(500)\r\n  const [imgContainWidth, setImgContainWidth] = useState(426)\r\n  const [isInit, setIsInit] = useState(false)\r\n\r\n  // Refs\r\n  const zoomReferences = useRef<(ReactZoomPanPinchRef | null)[]>([])\r\n\r\n  const videoReferences = useRef({})\r\n\r\n  const btnRef = useRef(null)\r\n\r\n\r\n  const [videoElements, setVideoElements] = useState({});\r\n\r\n  const isMobile = width <= mobileWidth;\r\n\r\n  const getLoaderThemeClass = () => {\r\n    if (props.theme) {\r\n      if (props.theme == 'night' || props.theme == 'lightbox') {\r\n        return styles.night_loader\r\n      } else if (props.theme == 'day') {\r\n        return styles.day_loader\r\n      }\r\n    }\r\n    return styles.night_loader\r\n  }\r\n\r\n  const [emblaRef, emblaApi] = useEmblaCarousel(reactSwipeOptions);\r\n  const [emblaThumbsRef, emblaThumbsApi] = useEmblaCarousel(thumbnailSwipeOptions)\r\n\r\n  const scrollPrev = useCallback(() => {    \r\n    if (emblaApi) {emblaApi.scrollPrev()}  \r\n      \r\n  }, [emblaApi])\r\n\r\n  const scrollNext = useCallback(() => {    \r\n    if (emblaApi) emblaApi.scrollNext()  \r\n  }, [emblaApi])\r\n\r\n  const variants = {\r\n    active: {\r\n        opacity: 1,\r\n    },\r\n    inactive: {\r\n      opacity: 0,\r\n    }\r\n  }\r\n\r\n  const isImageCaption = () => {\r\n    if (props.images && props.images[slideIndex].caption) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  const displayDownloadBtn = () => {\r\n    if (isVideo(slideIndex)) {\r\n      return false\r\n    } else {\r\n      return showDownloadBtn\r\n    }\r\n  }\r\n\r\n  function handleWindowResize() {\r\n    setWidth(window.innerWidth)\r\n  }\r\n\r\n  const shouldDisplayMagnifyingGlassIcon = () => {\r\n    if (isVideo(slideIndex)) {\r\n      return false\r\n    }\r\n    if (isMobile == true) {\r\n      return false\r\n    }\r\n    if (imageFullScreen == true) {\r\n      return false\r\n    }\r\n\r\n    if (magnifyingGlassFeature == true) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  const getImageStyle = () => {\r\n    let styleObject = {};\r\n    if (isRounded) {\r\n      styleObject[\"borderRadius\"] = \"20px\";\r\n    }\r\n    if (modalCloseOption == \"clickOutside\") {\r\n      styleObject[\"pointerEvents\"] = \"auto\"\r\n    }\r\n    if (isImageComponent && showThumbnails == false && !isMobile) {\r\n      styleObject[\"height\"] = \"85vh\";\r\n    }\r\n    return styleObject;\r\n  }\r\n\r\n  const shouldDisplaySlideshowIcon = () => {\r\n\r\n    if (props.showSlideshowIcon != undefined) {\r\n      return props.showSlideshowIcon;\r\n    }\r\n\r\n    if (images) {\r\n      if (images.length == 1) {\r\n        return false;\r\n      }\r\n    }\r\n    else if (props.images) {\r\n      if (props.images.length == 1) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  const thumbnailClick = (index) => {\r\n    initLoader(index)\r\n    setCurrentSlide(index)\r\n  }\r\n\r\n  const checkModalClick = (e) => {\r\n    const modals = document.getElementsByClassName('imageModal')\r\n    let arr_modals = Array.from(modals)\r\n    for (let i = 0; i < arr_modals.length; i++) {\r\n      let elem = arr_modals[i]\r\n      let clickInside = elem.contains(e.target);\r\n\r\n      if (clickInside) {\r\n        return\r\n      }\r\n    }\r\n\r\n    closeModal()\r\n  }\r\n\r\n  const isZoomEnabled = () => {\r\n    if (disableZoom == true) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const getRTLIndex = (img_gallery_length, i) => {\r\n    let index\r\n    if (i == 0) {\r\n      index = img_gallery_length - 1\r\n    } else if (i == img_gallery_length - 1) {\r\n      index = 0\r\n    } else {\r\n      index = img_gallery_length - i - 1\r\n    }\r\n    return index\r\n  }\r\n\r\n  const getIconColor = () => {\r\n    if (props.theme) {\r\n      if (themes[props.theme]) {\r\n        return themes[props.theme].iconColor;\r\n      }\r\n    }\r\n    else {\r\n      return themes[defaultTheme].iconColor;\r\n    }\r\n  }\r\n\r\n  const fullScreen = () => {\r\n    let lightbox = document.getElementById('slideshowAnim')\r\n    openFullScreen(lightbox)\r\n    setIsBrowserFullScreen(true)\r\n    initFullScreenChangeEventListeners()\r\n  }\r\n\r\n  const exitFullScreenHandler = () => {\r\n    //in full screen mode\r\n    if (\r\n      document['webkitIsFullScreen'] ||\r\n      document['mozFullScreen'] ||\r\n      document['msFullscreenElement']\r\n    ) {\r\n      setIsBrowserFullScreen(true)\r\n    } else {\r\n      if (isBrowserFullScreen) {\r\n        closeFullScreen(document)\r\n      }\r\n      removeFullScreenChangeEventListeners()\r\n      setIsBrowserFullScreen(false)\r\n    }\r\n  }\r\n\r\n  const exitFullScreen = () => {\r\n    closeFullScreen(document)\r\n    removeFullScreenChangeEventListeners()\r\n    setIsBrowserFullScreen(false)\r\n  }\r\n\r\n  const updateImageSlideshow = (newDirection) => {\r\n    if (isRTL) {\r\n      scrollPrev()\r\n    } else {\r\n      scrollNext();\r\n    }\r\n\r\n    setImgSlideIndex([imgSlideIndex + newDirection, newDirection])\r\n    if (isRTL) {\r\n      setZoomIdx(zoomIdx - 1 < 0 ? images.length - 1 : zoomIdx - 1)\r\n    } else {\r\n      setZoomIdx(zoomIdx + 1 >= images.length ? 0 : zoomIdx + 1)\r\n    }\r\n  }\r\n\r\n  const displayArrows = () => {\r\n    if (props.showArrows == false) {\r\n      return false;\r\n    }\r\n    else if (images.length == 1) {\r\n      return false;\r\n    }\r\n    if (props.images) {\r\n      if (props.images.length == 1) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  const initLoader = (newIndex) => {\r\n\r\n    if (props.showLoader && props.images) {\r\n      if (!isVideo(newIndex) && images[newIndex].loaded != true) {\r\n        setDisplayLoader(true)\r\n      } else if (\r\n        props.showLoader &&\r\n        props.images &&\r\n        images[newIndex]['loaded']\r\n      ) {\r\n        setDisplayLoader(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const getImageCaption = (): string => {\r\n    if (props.images) {\r\n      return props.images[slideIndex].caption;\r\n    }\r\n    return \"\"\r\n  }\r\n\r\n  const getArrowStyle = (): string | void => {\r\n    if (arrowStyle == 'dark') {\r\n      return styles.dark_icon\r\n    } else if (arrowStyle == 'light') {\r\n      return styles.light_icon\r\n    }\r\n  }\r\n\r\n  const getIconStyle = (): string | undefined => {\r\n    if (arrowStyle == 'dark') {\r\n      return styles.dark_header_icon\r\n    } \r\n    else if (arrowStyle == 'light') {\r\n      return styles.light_header_icon\r\n    }\r\n  }\r\n\r\n  const setCurrentSlide = (newIndex) => {\r\n    let newDirection\r\n    if (newIndex > imgSlideIndex) {\r\n      newDirection = 1\r\n    } else {\r\n      newDirection = -1\r\n    }\r\n\r\n    setZoomIdx(newIndex)\r\n\r\n    setImgSlideIndex([newIndex, newDirection])\r\n\r\n    if (emblaApi) {\r\n      emblaApi.scrollTo(newIndex)\r\n    }\r\n  }\r\n\r\n  const dispatchOpenEvent = () => {\r\n    if (props.onOpen) {\r\n      props.onOpen(slideIndex, images[slideIndex]);\r\n    }\r\n  }\r\n\r\n  const dispatchCloseEvent = () => {\r\n    if (props.onClose) {\r\n      props.onClose(slideIndex)\r\n    }\r\n  }\r\n\r\n  const dispatchNextImgEvent = (newIndex) => {\r\n    if (props.onNext) {\r\n      props.onNext(newIndex, images[newIndex])\r\n    }\r\n  }\r\n\r\n  const dispatchPrevImgEvent = (newIndex) => {\r\n    if (props.onPrev) {\r\n      props.onPrev(newIndex, images[newIndex])\r\n    }\r\n  }\r\n\r\n  const closeModal = () => {\r\n    //reset zoom ref\r\n    setZoomIdx(0)\r\n\r\n    if (isBrowserFullScreen) {\r\n      exitFullScreen()\r\n    }\r\n\r\n    // ensure slideshow is paused\r\n    if (isSlideshowPlaying) {\r\n      setIsSlideshowPlaying(false)\r\n    }\r\n\r\n    setShowModal(false)\r\n    setIsOpen(false)\r\n    setCarouselReady(false)\r\n    setEmblaReinitialized(false)\r\n    if (prevFocusedElem) prevFocusedElem?.focus();\r\n  }\r\n\r\n  const openModal = (num) => {\r\n\r\n    if (emblaApi) { \r\n      emblaApi.reInit();\r\n      if (emblaThumbsApi) {\r\n        emblaThumbsApi?.scrollTo(emblaApi.selectedScrollSnap())\r\n      }\r\n    }\r\n    setImgSlideIndex([num, 1])\r\n    setShowModal(true)\r\n    setIsOpen(true)\r\n\r\n  }\r\n\r\n  const setItemLoaded = (index) => {\r\n\r\n    if (props.images) {\r\n      setImages(images =>\r\n        images.map((img, i) => index === i ? {\r\n          ...img,\r\n          loaded: true\r\n        } : img)\r\n      )\r\n    }\r\n  }\r\n\r\n  const setImagesItemLoaded = (index) => {\r\n    setImages(images =>\r\n      images.map((img, i) => index === i ? {\r\n        ...img,\r\n        loaded: true\r\n      } : img)\r\n    )\r\n  }\r\n\r\n  const resetMedia = (slide_index) => {\r\n    resetVideo(slide_index)\r\n    resetImage()\r\n  }\r\n\r\n  const initSlide = (newSlideIndex) => {\r\n    setImgSlideIndex([newSlideIndex, 1])\r\n    let wrap_slide_index = wrapNums(0, images.length, newSlideIndex)\r\n    setZoomIdx(wrap_slide_index)\r\n    initLoader(wrap_slide_index)\r\n  }\r\n\r\n  const nextSlide = () => {\r\n    scrollNext();\r\n    initSlide( imgSlideIndex + 1);\r\n  }\r\n\r\n  const prevSlide = () => {\r\n    scrollPrev()\r\n    initSlide(imgSlideIndex - 1)\r\n  }\r\n\r\n  const setThumbnailStartIndex = (index) => {\r\n    let thumbnailSwipeOptionConfig = thumbnailSwipeOptions;\r\n    thumbnailSwipeOptionConfig.startIndex = index\r\n    setThumbnailSwipeOptions(thumbnailSwipeOptionConfig)\r\n  }\r\n\r\n  const openModalWithSlideNum = (index) => {\r\n    let reactSwipeOptionConfig = reactSwipeOptions\r\n    reactSwipeOptionConfig.startIndex = index\r\n    setReactSwipeOptions(reactSwipeOptionConfig)\r\n    setThumbnailStartIndex(index)\r\n    setZoomIdx(index)\r\n    openModal(index)\r\n  }\r\n\r\n  const saveImage = () => {\r\n    if (props.images.length > 0) {\r\n      if (props.images[slideIndex].original) {\r\n        saveAs(props.images[slideIndex].original, 'image.jpg')\r\n      } else {\r\n        saveAs(props.images[slideIndex]['src'], 'image.jpg')\r\n      }\r\n    } else {\r\n      if (images[slideIndex].src) {\r\n        saveAs(images[slideIndex].src!, 'image.jpeg')\r\n      }\r\n    }\r\n  }\r\n\r\n  const playSlideshow = () => {\r\n    setMagnifyingGlass(false)\r\n    if (isRTL) {\r\n      updateImageSlideshow(-1)\r\n    } else {\r\n      updateImageSlideshow(1)\r\n    }\r\n    setIsSlideshowPlaying(true)\r\n  }\r\n\r\n  const stopSlideshow = () => {\r\n    setIsSlideshowPlaying(false)\r\n  }\r\n\r\n  const resetVideo = (slide_index) => {\r\n    if (props.images) {\r\n      let elem = props.images[slide_index]\r\n      if (elem) {\r\n        if ( elem.type == 'htmlVideo') {\r\n          videoReferences.current[slide_index].pause()\r\n        }\r\n        else if (elem.type == \"yt\") {\r\n          videoElements[slide_index].target.pauseVideo()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const getImageThumbnail = (img, index, isNextJS) => {\r\n    return (\r\n      <div key={\"thumbnail_slide_\" + index} className={`${styles.embla_thumbs__slide}`}>\r\n\r\n      <img\r\n        className={`${styles.thumbnail} imageModal`}\r\n        src={isNextJS == true ? getThumbnailImgSrcNext(img, index) : getThumbnailImgSrc(img, index)}\r\n        alt={img.alt}\r\n        onLoad={() => setImagesLoaded(true)}\r\n        style={\r\n          slideIndex === index\r\n            ? { border: thumbnailBorder }\r\n            : { border: inactiveThumbnailBorder }\r\n        }\r\n        key={\"thumbnail_\" + index}\r\n        onClick={() => {\r\n          thumbnailClick(index);\r\n        }}\r\n      />\r\n  </div>\r\n    )\r\n  }\r\n\r\n  const resetImage = () => {\r\n    if (enableMagnifyingGlass) {\r\n      initMagnifyingGlass()\r\n    } else {\r\n      if (zoomReferences.current[zoomIdx] != null) {\r\n        zoomReferences.current[zoomIdx]!.resetTransform()\r\n      }\r\n    }\r\n  }\r\n\r\n  const getThumbnailImgSrc = (img, index) => {\r\n    if (isVideo(index) && img.thumbnail) {\r\n      return img.thumbnail\r\n    } else {\r\n      return img.src\r\n    }\r\n  }\r\n\r\n  const getThumbnailImgSrcNext = (img, index) => {\r\n    if (isVideo(index)) {\r\n      return img.thumbnail\r\n    } else {\r\n      let img_src = img.src\r\n      if (\r\n        typeof img_src === 'object' &&\r\n        !Array.isArray(img_src) &&\r\n        img_src !== null\r\n      ) {\r\n        return img_src.src\r\n      } else {\r\n        return img_src\r\n      }\r\n    }\r\n  }\r\n\r\n  const isAnimImageComponent = () => {\r\n    if (images) {\r\n      if (images.length == 1) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  const initWrapperClassname = () => {\r\n    let classNameStr = \"\";\r\n    if (isAnimImageComponent()) {\r\n        if (props.imgWrapperClassName) {\r\n          classNameStr += `${props.imgWrapperClassName} `\r\n        }\r\n    }\r\n    else if (props.className) {\r\n        classNameStr += `${props.className} `\r\n    }\r\n    \r\n    classNameStr += `${styles.lightboxjs}`;\r\n    \r\n    return classNameStr;\r\n  }\r\n\r\n  const initStyling = () => {\r\n    if (props.theme) {\r\n      if (themes[props.theme]) {\r\n        setBackgroundColor(themes[props.theme].background)\r\n        // setIconColor(themes[props.theme].iconColor)\r\n        // setThumbnailBorder(themes[props.theme].thumbnailBorder)\r\n        setTextColor(themes[props.theme].textColor)\r\n      }\r\n    }\r\n\r\n    if (props.fullScreen) {\r\n      if (props.fullScreen == true) {\r\n        setImgAnimation('fade')\r\n        setIsRounded(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const imageSlideElement = (index) => {\r\n    let imageElem;\r\n    if (!props.images) {\r\n      imageElem = (\r\n        <img\r\n        className={`imageModal ${styles.embla__slide__img}\r\n        ${props.fullScreen\r\n          ? styles.fullScreenLightboxImg\r\n          : styles.lightbox_img\r\n          } \r\n        ${enableMagnifyingGlass\r\n            ? styles.maxWidthFull\r\n            : styles.maxWidthWithoutMagnifier\r\n          } `}\r\n          style={getImageStyle()}\r\n          ref={imageRef}\r\n          loading='lazy'\r\n          src={\r\n            images[index].original ? images[index].original : images[index].src\r\n          }\r\n          onLoad={() => {\r\n            if (index == slideIndex) {\r\n              setDisplayLoader(false)\r\n            }\r\n\r\n            if (props.images) {\r\n              setItemLoaded(index)\r\n            } else {\r\n              setImagesItemLoaded(index)\r\n            }\r\n          }}\r\n          id='img'\r\n        />\r\n\r\n      )\r\n    } else if (props.images && props.render) {\r\n      imageElem = props.render.imgSlide(props.images[index])\r\n    } else {\r\n      let img_link\r\n\r\n      // check if object (Next.js local image imports are passed as objects with a src attribute)\r\n      if (props.images) {\r\n        if (\r\n          typeof images[index].src === 'object' &&\r\n          !Array.isArray(images[index].src) &&\r\n          images[index].src !== null\r\n        ) {\r\n          img_link = images[index].src?.src\r\n        } else if (props.coverImageInLightbox == true) {\r\n          img_link = images[index].src\r\n        } else {\r\n          img_link = images[index].src\r\n        }\r\n      }\r\n\r\n\r\n      imageElem = (\r\n        <img\r\n        className={`imageModal ${styles.embla__slide__img}\r\n        ${props.fullScreen\r\n          ? styles.fullScreenLightboxImg\r\n          : styles.lightbox_img\r\n          } \r\n        ${enableMagnifyingGlass\r\n            ? styles.maxWidthFull\r\n            : styles.maxWidthWithoutMagnifier\r\n          } `}\r\n          ref={imageRef}\r\n          loading='lazy'\r\n          style={getImageStyle()}\r\n          src={\r\n            images[index].original\r\n              ? images[index].original\r\n              : img_link\r\n          }\r\n          onLoad={() => {\r\n            if (index == slideIndex) {\r\n              setDisplayLoader(false)\r\n            }\r\n\r\n            if (props.images) {\r\n              setItemLoaded(index)\r\n            } else {\r\n              setImagesItemLoaded(index)\r\n            }\r\n          }}\r\n          id='img'\r\n        />\r\n      )\r\n    }\r\n\r\n    return imageElem\r\n  }\r\n\r\n  const isPanningDisabled = () => {\r\n    if (isMobile && zoomedIn == false) {\r\n      return true;\r\n    }\r\n    if (isMobile && zoomedIn) {\r\n      return false;\r\n    }\r\n    \r\n    return false;\r\n  }\r\n  \r\n  const getLightboxElem = (index) => {\r\n    if (isVideo(index))  {\r\n      return videoSlideElement(index) \r\n    }\r\n    else if (isPictureElement(index)) {\r\n      let elem_metadata = props.images[index][\"picture\"];\r\n      return <picture  className={`imageModal \r\n      ${props.fullScreen\r\n        ? styles.fullScreenLightboxImg\r\n        : styles.lightbox_img\r\n        } \r\n      ${enableMagnifyingGlass\r\n          ? styles.maxWidthFull\r\n          : styles.maxWidthWithoutMagnifier\r\n        } `}>\r\n            {Object.keys(elem_metadata).map((format) => (\r\n                <source\r\n                    type={format}\r\n                    key={format}\r\n                    srcSet={elem_metadata[format].srcSet}\r\n                />\r\n            ))}\r\n            <img src={elem_metadata['fallback']} />\r\n        </picture>\r\n    }\r\n    else {\r\n\r\n      if ((images && props.render) ||\r\n      frameworkID == 'next') {\r\n        return imageSlideElement(index);\r\n      }\r\n      else {\r\n          return <img\r\n          className={`imageModal ${styles.embla__slide__img}\r\n          ${props.fullScreen\r\n            ? styles.fullScreenLightboxImg\r\n            : styles.lightbox_img\r\n            } \r\n          ${enableMagnifyingGlass\r\n              ? styles.maxWidthFull\r\n              : styles.maxWidthWithoutMagnifier\r\n            } `}\r\n          ref={imageRef}\r\n          key={index}\r\n          loading='lazy'\r\n          style={getImageStyle()}\r\n          src={\r\n            images && images[index].original\r\n              ? images[index].original\r\n              : images[index].src\r\n          }\r\n          onLoad={() => {\r\n            if (index == slideIndex) {\r\n              setDisplayLoader(false)\r\n            }\r\n  \r\n            if (props.images) {\r\n              setItemLoaded(index)\r\n            } else {\r\n              setImagesItemLoaded(index)\r\n            }\r\n          }}\r\n          id='img'\r\n        />\r\n          \r\n      }\r\n    }\r\n  }\r\n\r\n  const isVideo = (index) => {\r\n\r\n    if (props.images) {\r\n      let elem = props.images[index]\r\n      if (elem) {\r\n        if (elem.type == 'yt' || elem.type == 'htmlVideo') {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  const isPictureElement = (index) => {\r\n    if (props.images) {\r\n      let elem = props.images[index]\r\n      if (elem) {\r\n        if (elem.picture) {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!emblaApi) return \r\n    //emblaApi.reInit() // If the slides prop changes, pick it up\r\n  }, [\r\n    carouselReady, emblaApi\r\n  ])\r\n\r\n  const isHTMLVideo = (index) => {\r\n    if (props.images) {\r\n      if (props.images && props.images[index].type == 'htmlVideo') {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  const videoSlideElement = (index) => {\r\n    let elem = props.images[index];\r\n    let videoElem;\r\n\r\n    if (elem.type == 'yt') {\r\n      videoElem = (\r\n        <div className={`${styles.videoOuterContainer} imageModal`}>\r\n          <YouTube\r\n            videoId={elem.videoID}                 \r\n            ref={(el) => (videoReferences.current[index] = el)}\r\n            iframeClassName={`${styles.ytVideo}`}                                          \r\n            title='YouTube video player'\r\n            opts={{\r\n              height: getVideoHeight(elem),\r\n                width: getVideoWidth(elem),\r\n                playerVars: {\r\n                  // https://developers.google.com/youtube/player_parameters\r\n                  autoplay: shouldAutoplay(elem) ? 1 : 0,\r\n                }\r\n              }\r\n            }\r\n            // style={object}\r\n            // className={`${styles.ytVideo}`}\r\n            //loading={string}                     \r\n            onReady={(event) => {let videoElems = videoElements; videoElems[index] = event; setVideoElements(videoElems);\r\n                if (index == slideIndex) {\r\n              setDisplayLoader(false)\r\n            }\r\n            setItemLoaded(index)}}                    \r\n            onPlay={(event) => {\r\n              setYTVideoCurrentlyPlaying(true)\r\n            }}                   \r\n            onPause={(event) => {             \r\n            setYTVideoCurrentlyPlaying(false)\r\n            }}                      \r\n            onEnd={(event) => { setYTVideoCurrentlyPlaying(false)}}                        \r\n            onError={(event) => {}}                      \r\n            onStateChange={(event) => {}}               \r\n            onPlaybackRateChange={(event) => {}}        \r\n            onPlaybackQualityChange={(event) => {}}    \r\n          />\r\n\r\n          {/* Previously used iframe to create YouTube video embed */}\r\n          {/* <iframe\r\n            src={`https://www.youtube.com/embed/${elem.videoID}?${shouldAutoplay(elem) ? 'autoplay=1' : ''\r\n              }`}\r\n\r\n            frameBorder='0'\r\n            allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share'\r\n            allowFullScreen\r\n            \r\n          ></iframe> */}\r\n        </div>\r\n      )\r\n    } else if (elem.type == 'htmlVideo') {\r\n      videoElem = (\r\n        <div\r\n          className={`${styles.htmlVideo} ${styles.htmlVideoOuterContainer} imageModal`}\r\n        >\r\n          <video\r\n            className={`${styles.cursorPointer} ${styles.lightboxVideo}`}\r\n            width={getVideoWidth(elem)}\r\n            ref={(el) => (videoReferences.current[index] = el)}\r\n            onPlay={() => {\r\n            }}\r\n            height={getVideoHeight(elem)}\r\n            autoPlay={index == imgSlideIndex ? shouldAutoplay(elem) : false}\r\n            controls\r\n          >\r\n            <source\r\n              src={elem.videoSrc}\r\n              type='video/mp4'\r\n              onLoad={() => {\r\n                setItemLoaded(index)\r\n              }}\r\n            />\r\n          </video>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return videoElem\r\n  }\r\n\r\n  const initZoom = (ref) => {\r\n    \r\n    if (ref.state.scale <= 1.65) {\r\n      setZoomedIn(false)\r\n    }\r\n    else {\r\n      setZoomedIn(true)\r\n    }\r\n  }\r\n\r\n  const regularImgPaneNodes = Array.apply(null, Array(images.length)).map(\r\n    (_, index) => {\r\n      return (\r\n        <div key={index}>\r\n          {\r\n          \r\n          enableMagnifyingGlass == true ? (\r\n             <Magnifier\r\n               src={images[index].src!}\r\n               className={`${styles.magnifyWrapper} ${styles.lightbox_img}`}\r\n               height={imgContainHeight}\r\n               width={imgContainWidth}\r\n               mgShowOverflow={false}\r\n             />\r\n          ) \r\n          \r\n          : ( \r\n            <div className={`${styles.embla__slide}`}>\r\n              <TransformWrapper\r\n                ref={(el) => (zoomReferences.current[index] = el)}\r\n                onWheel={(ref, wheelEvent) => {\r\n                  initZoom(ref)\r\n                }}\r\n                disabled={disableZoom}\r\n                panning={{\r\n                  disabled: isPanningDisabled()\r\n                }}                \r\n                \r\n                key={index}\r\n                onZoom={\r\n                  (ref, event) => {\r\n                    initZoom(ref)\r\n                  }\r\n                }\r\n                onZoomStop={(ref, event) => {initZoom(ref)}}\r\n                onTransformed={\r\n                  (ref, event) => {\r\n                    initZoom(ref)\r\n                  }\r\n                }\r\n                onPinchingStop={(ref, event) => {\r\n                  initZoom(ref)\r\n                }}\r\n                centerZoomedOut={true}\r\n                initialScale={1}\r\n                alignmentAnimation={{ sizeX: 0, sizeY: 0 }}\r\n              >\r\n                <TransformComponent\r\n                  wrapperStyle={{\r\n                    maxWidth: '100vw',\r\n                    height: '100vh',\r\n                    margin: 'auto'\r\n                  }}\r\n                  contentStyle={\r\n                    props.fullScreen\r\n                      ? {\r\n                        maxWidth: '100vw',\r\n                        height: '100vh',\r\n                        marginLeft: 'auto',\r\n                        marginRight: 'auto'\r\n                      }\r\n                      : {\r\n                        maxWidth: '100vw',\r\n                        height: '100vh',\r\n                        margin: 'auto',\r\n                        display: 'grid'\r\n                      }\r\n                  }\r\n                  key={index}\r\n                >\r\n                  <div\r\n                    className={`${props.fullScreen\r\n                      ? styles.slideshow_img_fullscreen\r\n                      : styles.slideshow_img\r\n                      } ${props.lightboxImgClass ? props.lightboxImgClass : \"\"}`}\r\n                  >\r\n                    {getLightboxElem(index)}\r\n                  </div>\r\n                </TransformComponent>\r\n              </TransformWrapper>\r\n            </div>\r\n          )} \r\n        </div>\r\n      )\r\n    }\r\n  )\r\n\r\n  const initMagnifyingGlass = () => {\r\n    if (!enableMagnifyingGlass) {\r\n      initImageDimensions()\r\n    } else {\r\n      setImgAnimation('imgDrag')\r\n    }\r\n    setMagnifyingGlass(!enableMagnifyingGlass)\r\n  }\r\n\r\n  const initImageDimensions = () => {\r\n    let img\r\n    if (imgSlideIndex == 0 || imgSlideIndex % images.length == 0) {\r\n      img = document.getElementById('img')\r\n    } else {\r\n      img = imageRef.current\r\n    }\r\n\r\n    var ratio = img.naturalWidth / img.naturalHeight\r\n    var width = img.height * ratio\r\n    var height = img.height\r\n    if (width > img.width) {\r\n      width = img.width\r\n      height = img.width / ratio\r\n    }\r\n\r\n    setImgContainHeight(height)\r\n    setImgContainWidth(width)\r\n  }\r\n\r\n\r\n  const initFullScreenChangeEventListeners = () => {\r\n    document.addEventListener('fullscreenchange', exitFullScreenHandler)\r\n    document.addEventListener('webkitfullscreenchange', exitFullScreenHandler)\r\n    document.addEventListener('MSFullscreenChange', exitFullScreenHandler)\r\n    document.addEventListener('mozfullscreenchange', exitFullScreenHandler)\r\n  }\r\n\r\n  const removeFullScreenChangeEventListeners = () => {\r\n    document.removeEventListener('fullscreenchange', exitFullScreenHandler)\r\n    document.removeEventListener(\r\n      'webkitfullscreenchange',\r\n      exitFullScreenHandler\r\n    )\r\n    document.removeEventListener('MSFullscreenChange', exitFullScreenHandler)\r\n    document.removeEventListener('mozfullscreenchange', exitFullScreenHandler)\r\n  }\r\n\r\n  const initEventListeners = () => {\r\n    if (isBrowser()) {\r\n      window.addEventListener('resize', handleWindowResize)\r\n    }\r\n  }\r\n\r\n  const removeEventListeners = () => {\r\n    removeOnSelectListener();\r\n    if (isBrowser()) {\r\n      window.removeEventListener('resize', handleWindowResize)\r\n    }\r\n  }\r\n\r\n  const setReducedMotion = (mediaQuery) => {\r\n    if (mediaQuery.matches) {\r\n      setImgAnimation('fade')\r\n    }\r\n  }\r\n\r\n  // Check if the user has a preference for reduced motion\r\n  // If so, the image animation transitions between slides in the slideshow will be adjusted\r\n  // to account for this\r\n  const checkAndInitReducedMotion = () => {\r\n    let reducedMotionMediaQuery: any = ''\r\n\r\n    if (isBrowser()) {\r\n      reducedMotionMediaQuery = window.matchMedia(\r\n        '(prefers-reduced-motion: reduce)'\r\n      )\r\n\r\n      if (!reducedMotionMediaQuery || reducedMotionMediaQuery.matches) {\r\n        setImgAnimation('fade')\r\n      }\r\n\r\n      reducedMotionMediaQuery.addEventListener(\r\n        'change',\r\n        setReducedMotion(reducedMotionMediaQuery)\r\n      )\r\n    }\r\n\r\n    return reducedMotionMediaQuery\r\n  }\r\n\r\n   const initPropsForControlIcons = () => {\r\n     if (props.showFullScreenIcon != undefined) {\r\n        setDisplayFullScreenIcon(props.showFullScreenIcon)\r\n      }\r\n     if (props.showThumbnailIcon != undefined) {\r\n        setDisplayThumbnailIcon(props.showThumbnailIcon)\r\n     }\r\n\r\n     if (props.showSlideshowIcon != undefined) {\r\n       setDisplaySlideshowIcon(props.showSlideshowIcon)\r\n     }\r\n     if (props.showMagnificationIcons != undefined) {\r\n       setDisplayMagnificationIcons(props.showMagnificationIcons)\r\n     }\r\n   }\r\n\r\n  const initProps = () => {\r\n    if (props.showControls != undefined) {\r\n        setShowControls(props.showControls)\r\n        if (props.showControls == false) {\r\n          setDisplayMagnificationIcons(false)\r\n        }\r\n    }\r\n\r\n    initPropsForControlIcons()\r\n\r\n    if (props.disableImageZoom) {\r\n      setDisableZoom(props.disableImageZoom)\r\n    }\r\n\r\n    if (isBrowser()) {\r\n      setWidth(window.innerWidth)\r\n    }\r\n\r\n    if (window.innerWidth <= mobileWidth) {\r\n      setImgAnimation('fade')\r\n    }\r\n  }\r\n\r\n  // Slideshow feature; if isSlideshowPlaying set to true, then slideshow cycles through images\r\n  useInterval(\r\n    () => {\r\n      if (isRTL) {\r\n        updateImageSlideshow(-1)\r\n      } else {\r\n        updateImageSlideshow(1)\r\n      }\r\n    },\r\n\r\n    // Delay in milliseconds or null to stop it\r\n    isSlideshowPlaying ? slideshowInterval : null\r\n  )\r\n\r\n  const openFullScreen = (lightbox_elem) => {\r\n    if (lightbox_elem.requestFullscreen) {\r\n      lightbox_elem.requestFullscreen();\r\n    }\r\n\r\n    /* Safari */\r\n    else if (lightbox_elem.webkitRequestFullscreen) {\r\n      lightbox_elem.webkitRequestFullscreen();\r\n    }\r\n\r\n    /* Internet Explorer */\r\n    else if (lightbox_elem.msRequestFullscreen) {\r\n      lightbox_elem.msRequestFullscreen();\r\n    }\r\n  }\r\n\r\n  const closeFullScreen = (document) => {\r\n    if (document.exitFullscreen) {\r\n      document.exitFullscreen();\r\n    }\r\n\r\n    /* Safari */\r\n    else if (document.webkitExitFullscreen) {\r\n      document.webkitExitFullscreen();\r\n    }\r\n\r\n    /* Internet Explorer */\r\n    else if (document.msExitFullscreen) {\r\n      document.msExitFullscreen();\r\n    }\r\n  }\r\n\r\n  const isBrowser = () => typeof window !== \"undefined\"\r\n\r\n  const initRTLImages = () => {\r\n    // flip images array\r\n    let imagesMetadataCopy = props.images\r\n    imagesMetadataCopy.reverse()\r\n\r\n    setImages(imagesMetadataCopy)\r\n\r\n    if (images.length > 0) {\r\n      let imagesRTLCopy = images\r\n      imagesRTLCopy.reverse()\r\n      setImages(imagesRTLCopy)\r\n    }\r\n  }\r\n\r\n  const initImages = (isMounted, updateImages) => {\r\n \r\n    if (coverMode && props.images) {\r\n      if (props.coverImageInLightbox == false) {\r\n        let filterImages = props.images.filter((img) => img.cover != true)\r\n        setImages(filterImages)\r\n      } else {\r\n        setImages(props.images)\r\n      }\r\n    }\r\n\r\n    if (updateImages || !isInit) {\r\n      if (lightboxIdentifier && props.children) {\r\n\r\n        let img_gallery: NodeListOf<HTMLImageElement> = document.querySelectorAll(\r\n          `[data-lightboxjs=${lightboxIdentifier}]`\r\n        )\r\n        let originalImageAttr = false;\r\n        \r\n        \r\n        let img_elements: ImageElement[] = []\r\n        if (img_gallery.length > 0) {\r\n          for (let i = 0; i <= img_gallery.length - 1; i++) {\r\n            let img = img_gallery[i]\r\n\r\n            let attr_val = img.getAttribute('data-lightboxjs')\r\n            if (attr_val == lightboxIdentifier) {\r\n              img.addEventListener(\r\n                'click',\r\n                () => {\r\n                  let index\r\n\r\n                  if (isRTL) {\r\n                    index = getRTLIndex(img_gallery.length, i)\r\n                  } else {\r\n                    index = i\r\n                  }\r\n\r\n                  let reactSwipeOptionConfig = reactSwipeOptions\r\n                  reactSwipeOptionConfig.startIndex = index\r\n\r\n                  if (isMounted) setReactSwipeOptions(reactSwipeOptionConfig)\r\n                  setZoomIdx(index)\r\n                  openModal(index)\r\n                },\r\n                false\r\n              )\r\n              img.classList.add('cursor-pointer')\r\n\r\n              let original_img_src = img.getAttribute('data-lightboxjs-original')\r\n\r\n              if (original_img_src) {\r\n                img_elements.push({\r\n                  src: original_img_src,\r\n                  alt: img.alt,\r\n                  loaded: false\r\n                })\r\n                originalImageAttr = true;\r\n              }\r\n              else if (img.src) {\r\n                img_elements.push({\r\n                  src: img.src,\r\n                  alt: img.alt,\r\n                  loaded: false\r\n                })\r\n              } else if (img.tagName == 'DIV') {\r\n                let corresponding_img_item = props.images[i]\r\n                let img_src = corresponding_img_item.src\r\n                let img_alt = corresponding_img_item.alt\r\n                img_elements.push({\r\n                  src: img_src,\r\n                  alt: img_alt,\r\n                  loaded: false\r\n                })\r\n              }\r\n            }\r\n          }\r\n          if (isMounted && !coverMode) {\r\n            if (originalImageAttr) {\r\n              setImages(img_elements) \r\n\r\n            }\r\n            else if ( props.showAllImages != true && props.framework != \"next\") {\r\n              setImages(img_elements) \r\n            } \r\n            else if (props.framework == \"next\" && !originalImageAttr) {\r\n              setImages(props.images)\r\n            }\r\n            else {\r\n              setImages(props.images)\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          if (props.images) {\r\n            setImages(props.images)\r\n\r\n          }\r\n        }\r\n      }\r\n      else if (lightboxIdentifier && props.images && !props.children) {\r\n        setImages(props.images)\r\n\r\n      }\r\n      else if (!lightboxIdentifier && props.images && !props.children) {\r\n        setImages(props.images)\r\n      }\r\n\r\n      // otherwise, if no lightbox identifier or custom render method\r\n      else if (!props.render) {\r\n        let imgArray: any = [];\r\n        // only one image\r\n        if (!Array.isArray(props.children)) {\r\n          imgArray.push(props.children);\r\n        }\r\n\r\n        // multiple images\r\n        else {\r\n          imgArray = props.children;\r\n        }\r\n        \r\n        let imgs: ImageElement[] = []\r\n        for (let k = 0; k < imgArray.length; k++) {\r\n          let img_elem = imgArray[k]\r\n          let img_obj = {\r\n            src: img_elem.props.src,\r\n            alt: img_elem.props.alt,\r\n            loaded: false\r\n          }\r\n          imgs.push(img_obj)\r\n        }\r\n        if (isRTL) {\r\n          imgs.reverse()\r\n        }\r\n        if (isMounted) setImages(imgs)\r\n\r\n        setPreviewImageElems(imgArray)\r\n\r\n      } else {\r\n        if (isMounted) { setImages(props.images);}\r\n      }\r\n\r\n      if (isMounted) setIsInit(true)\r\n    }\r\n  }\r\n\r\n  const dispatchSlideSelectEvents = (newIndex, prevIndex) => {\r\n\r\n    if (newIndex == 0 && prevIndex == images.length - 1) {\r\n      dispatchNextImgEvent(newIndex)\r\n    }\r\n    else if (newIndex == images.length - 1 && prevIndex == 0) {\r\n      dispatchPrevImgEvent(newIndex)\r\n    }\r\n\r\n    else if (newIndex > prevIndex) {\r\n      dispatchNextImgEvent(newIndex)\r\n    }\r\n    else if (newIndex < prevIndex) {\r\n      dispatchPrevImgEvent(newIndex)\r\n    }\r\n    \r\n  }\r\n\r\n  const onSelect = useCallback(() => {\r\n\r\n    if (!emblaApi) return\r\n\r\n    let newSlideIndex: any = emblaApi.selectedScrollSnap();\r\n    let prevSlideIndex: any = emblaApi.previousScrollSnap();\r\n\r\n    if (newSlideIndex != prevSlideIndex) {\r\n      initSlide(newSlideIndex);\r\n      resetMedia(prevSlideIndex);\r\n      dispatchSlideSelectEvents(newSlideIndex, prevSlideIndex)\r\n    }\r\n\r\n    if (emblaThumbsApi) {\r\n    emblaThumbsApi.scrollTo(emblaApi.selectedScrollSnap())\r\n    }\r\n\r\n  }, [emblaApi, emblaThumbsApi])\r\n\r\n  const onReinit = useCallback(() => {\r\n    if (!emblaApi) return\r\n    setEmblaReinitialized(true)\r\n\r\n  }, [emblaApi, emblaReinitialized])\r\n\r\n\r\n  const handleResize = (entry) => {\r\n    emblaApi?.reInit();\r\n  };\r\n\r\n  const rootNode = emblaApi?.rootNode() || null;\r\n  useResizeObserver(rootNode, handleResize);\r\n\r\n  const removeOnSelectListener = useCallback(() => {   \r\n     if (emblaApi) emblaApi.off('select', onSelect)  \r\n  }, [emblaApi, onSelect])\r\n\r\n  useEffect(()=>{ \r\n    if (emblaApi) {\r\n      if (zoomedIn) {\r\n        emblaApi.reInit({draggable: false});\r\n      }\r\n      else {\r\n        emblaApi.reInit({draggable: true});\r\n      }\r\n    } \r\n  }, [zoomedIn])\r\n\r\n  useEffect(() => {\r\n      if (!emblaApi) return \r\n\r\n      if (showModal) emblaApi.reInit()\r\n    }, [ showModal, emblaApi])\r\n\r\n\r\n  useEffect(() => {    \r\n    if (emblaApi) emblaApi.on('select', onSelect)  \r\n    if (emblaApi) {}\r\n  }, [emblaApi, onSelect])\r\n\r\n  useEffect(() => {    \r\n    if (emblaApi) emblaApi.on('reInit', onReinit)  \r\n  }, [emblaApi, onReinit])\r\n\r\n  // update theme if prop changes\r\n  useEffect(() => {\r\n    initStyling();\r\n    if (props.iconColor) { setIconColor(props.iconColor) }\r\n    if (props.backgroundColor) { setBackgroundColor(props.backgroundColor) }\r\n\r\n  }, [props.theme, props.iconColor, props.backgroundColor]);\r\n\r\n  useEffect(() => {\r\n    initImages(true, true)\r\n  }, [props.images, props.displayedImages]);\r\n\r\n\r\n  useEffect(() => {\r\n    let slideNum = 0;\r\n    if (props.open) {\r\n      if (props.startingSlideIndex) {\r\n        if (props.startingSlideIndex < images.length && (props.startingSlideIndex >= 0)) {\r\n          slideNum = props.startingSlideIndex;\r\n        }\r\n        else {\r\n          slideNum = 0\r\n        }\r\n      }\r\n\r\n      openModalWithSlideNum(slideNum)\r\n    }\r\n    else if (props.open == false) {\r\n      closeModal()\r\n    }\r\n  }, [props.open]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen == true) {\r\n      dispatchOpenEvent()\r\n    }\r\n    else {\r\n      dispatchCloseEvent()\r\n    }\r\n\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n\r\n    // Error check\r\n    if (props.render) {\r\n      if (!props.images) {\r\n        console.error(\r\n          'Array of images must be passed to `SlideshowLightbox` (with the `images` prop) if using custom render method. '\r\n        )\r\n      }\r\n    }\r\n\r\n    let isMounted = true\r\n    if (isMounted) initProps()\r\n\r\n    if (coverMode && props.images) {\r\n      if (props.coverImageInLightbox == false) {\r\n        let filterImages = props.images.filter((img) => img.cover != true)\r\n        setImages(filterImages)\r\n      } else {\r\n        setImages(props.images)\r\n      }\r\n    }\r\n\r\n    if (isMounted) {\r\n      initEventListeners()\r\n    }\r\n\r\n    let reducedMotionMediaQuery = checkAndInitReducedMotion()\r\n\r\n    if (!isInit) {\r\n      initImages(isMounted, false);\r\n\r\n      if (props.images && isRTL == true) {\r\n        initRTLImages();\r\n      }\r\n    }\r\n\r\n    if (isMounted) initStyling()\r\n\r\n    return () => {\r\n      isMounted = false\r\n      removeEventListeners()\r\n      reducedMotionMediaQuery.removeEventListener(\r\n        'change',\r\n        reducedMotionMediaQuery\r\n      )\r\n    }\r\n  }, [])\r\n\r\n  return <div>\r\n    <div className={`${initWrapperClassname()}`}>\r\n      {props.images && props.children && lightboxIdentifier == false\r\n        ? props.children\r\n        : null}\r\n\r\n      {props.images && lightboxIdentifier == false\r\n        ? props.images.map((elem, index) => (\r\n          <img\r\n          className={`${props.imgClassName ? props.imgClassName : ''\r\n          } ${styles.cursorPointer}`}\r\n\r\n            src={!isVideo(index) ? elem.src : elem.thumbnail}\r\n            // src={isSrcStr(elem.src) ? elem.src : elem.src.src}\r\n            onClick={() => {\r\n              let img_index\r\n\r\n              if (isRTL) {\r\n                img_index = getRTLIndex(props.images.length, index)\r\n              } else {\r\n                img_index = index\r\n              }\r\n\r\n              openModalWithSlideNum(img_index)\r\n            }}\r\n            key={index}\r\n          />\r\n        ))\r\n        : null}\r\n\r\n      {/* IF Lightbox identifier provided or props.images provided AND props.children */}\r\n      {lightboxIdentifier != false && props.children && coverMode == false\r\n        ? props.children\r\n        : null}\r\n\r\n      {/* {lightboxIdentifier != false && !props.children && coverMode == false\r\n        ? <h1>images</h1>\r\n        : null} */}\r\n\r\n      {(lightboxIdentifier == false && props.images) || coverMode == true\r\n        ? null\r\n        : // No lightbox identifier provided or no cover mode\r\n        previewImageElems\r\n          .filter((elem) => elem.type == 'img')\r\n          .map((elem, index) => (\r\n            <img\r\n              {...elem.props}\r\n              className={`${elem.props.className ? elem.props.className : ''\r\n                } ${styles.cursorPointer}`}\r\n              onClick={() => {\r\n                let img_index\r\n\r\n                if (isRTL) {\r\n                  img_index = getRTLIndex(previewImageElems.length, index)\r\n                } else {\r\n                  img_index = index\r\n                }\r\n\r\n                openModalWithSlideNum(img_index)\r\n              }}\r\n              key={index}\r\n            />\r\n          ))}\r\n\r\n      {coverMode ? props.children : false}\r\n      \r\n      <AnimateSharedLayout type='crossfade'>\r\n\r\n        <AnimatePresence initial={false} exitBeforeEnter={true}>\r\n          {showModal !== false && (\r\n            <Portal>\r\n              <Div100vh>\r\n                <motion.div\r\n                  className={`${styles.slideshowAnimContainer}`}\r\n                  key='slideshowAnimContainer'\r\n                  id='slideshowAnim'\r\n                  style={{\r\n                    backgroundColor: backgroundColor,\r\n                  }}\r\n                  initial={\"inactive\"}\r\n                  variants={variants}\r\n                  animate={showModal ? \"active\" : \"inactive\"}   \r\n                  exit={\"inactive\"}         \r\n                  transition={\r\n                    {duration: \"0.3\"}\r\n                  }    \r\n                  onAnimationComplete={() => {\r\n                    let animEntered = !animationEntered;\r\n                    setAnimationEntered(animEntered);\r\n     \r\n                    if (animEntered == true) {\r\n                      let prevFocusedElement: any = document.activeElement;\r\n                      setPrevFocusedElem(prevFocusedElement)\r\n\r\n                      document.getElementById(\"lightboxContainer\")?.focus();\r\n                    }\r\n                    else {\r\n                      prevFocusedElem?.focus();\r\n                    }\r\n                    \r\n                  }}\r\n                  \r\n                >\r\n                  <div className={`${styles.lightboxContainer}`} id=\"lightboxContainer\" tabIndex={-1} role=\"dialog\"\r\n                   onClick={(e) => {if (modalCloseOption == \"clickOutside\") {checkModalClick(e)}}}>\r\n                    <section\r\n                      className={`${styles.iconsHeader} ${iconColor ? '' : getIconStyle()\r\n                        } imageModal`}\r\n                      style={{ color: iconColor }}\r\n                    >\r\n                       <KeyHandler\r\n                        keyValue={'ArrowLeft'}\r\n                        code={'37'}\r\n                        onKeyHandle={() => {\r\n                          prevSlide()\r\n                        }}\r\n                      /> \r\n                      <KeyHandler\r\n                        keyValue={'ArrowRight'}\r\n                        code={'39'}\r\n                        onKeyHandle={() => {\r\n                          nextSlide()\r\n                        }}\r\n                      />\r\n                      <KeyHandler\r\n                        keyValue={'Escape'}\r\n                        code={'27'}\r\n                        onKeyHandle={(event) => {\r\n                          event.preventDefault();\r\n                          event.stopPropagation();\r\n                          if (!isBrowserFullScreen) {\r\n                             closeModal()\r\n                          }\r\n                        }}\r\n                      /> \r\n\r\n                      {/* Support for Internet Explorer and Edge key values  */}\r\n                      <KeyHandler\r\n                        keyValue={'Left'}\r\n                        code={'37'}\r\n                        onKeyHandle={() => {\r\n                          prevSlide()\r\n                        }}\r\n                      /> \r\n                      <KeyHandler\r\n                        keyValue={'Right'}\r\n                        code={'39'}\r\n                        onKeyHandle={() => {\r\n                          nextSlide()\r\n                        }}\r\n                      />\r\n                      <KeyHandler\r\n                        keyValue={'Esc'}\r\n                        code={'27'}\r\n                        onKeyHandle={(event) => {\r\n                          event.preventDefault();\r\n                          event.stopPropagation();\r\n                          if (!isBrowserFullScreen) {\r\n                            closeModal()\r\n                          }\r\n                        }}\r\n                      />\r\n\r\n                      {showControls == true && (\r\n                        <div className={`${styles.controls}`}>\r\n                          {disableZoom ||\r\n                            displayMagnificationIcons == false ? null : \r\n                            <motion.div>\r\n                              <button onClick={() => {\r\n                                  if (enableMagnifyingGlass) {\r\n                                    initMagnifyingGlass()\r\n                                  }\r\n                                  if (zoomReferences.current[zoomIdx] != null) {\r\n                                    zoomReferences.current[zoomIdx]!.zoomIn()\r\n                                  }\r\n                                  setZoomedIn(true)\r\n                                }}>\r\n                                  <ZoomIn\r\n                                    size={24}\r\n                                    color={iconColor ? iconColor : undefined}\r\n                                    className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                      }`}\r\n                                    style={iconColor ? { color: iconColor } : {}}\r\n                                  />\r\n                              </button>\r\n\r\n                            </motion.div>\r\n                           }\r\n\r\n                          {disableZoom ||\r\n                            displayMagnificationIcons == false ? null : \r\n                            <motion.div>\r\n                              <button \r\n                              onClick={() => {\r\n                                zoomReferences.current[zoomIdx]!.zoomOut();\r\n                                let scale = zoomReferences.current[zoomIdx]!.state.scale;\r\n                                \r\n                                if (scale == 1 || scale == 1.65) {\r\n                                  setZoomedIn(false)\r\n                                }\r\n\r\n                              }}>\r\n                              <ZoomOut\r\n                                size={24}\r\n                                className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                  }`}\r\n                                style={iconColor ? { color: iconColor } : {}}\r\n                                color={iconColor ? iconColor : undefined}\r\n                                \r\n                              />\r\n                              </button>\r\n                              \r\n                            </motion.div>\r\n                          }\r\n\r\n                          {displayDownloadBtn() ? (\r\n                            <button \r\n                            onClick={() => {\r\n                              saveImage()\r\n                            }}>\r\n                            <Download\r\n                            size={24}\r\n                              className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                }`}\r\n                              style={iconColor ? { color: iconColor } : {}}\r\n                              color={iconColor ? iconColor : undefined}\r\n                             \r\n                            />\r\n                            </button>\r\n                            \r\n                          ) : null}\r\n\r\n                          {displayFullScreenIcon ? (\r\n                            isBrowserFullScreen ? (\r\n                              <motion.div>\r\n                                <button \r\n                                onClick={() => {\r\n                                  isBrowserFullScreen\r\n                                    ? exitFullScreen()\r\n                                    : fullScreen()\r\n                                }}>\r\n                                <FullscreenExit\r\n                                  size={24}\r\n                                  className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                    }`}\r\n                                  style={iconColor ? { color: iconColor } : {}}\r\n                                  color={iconColor ? iconColor : undefined}\r\n                                  \r\n                                />\r\n                                </button>\r\n                                \r\n                              </motion.div>\r\n                            ) : (\r\n                              <motion.div>\r\n                                <button onClick={() => {\r\n                                    isBrowserFullScreen\r\n                                      ? exitFullScreen()\r\n                                      : fullScreen()\r\n                                  }}>\r\n                                <Fullscreen\r\n                                  size={24}\r\n                                  className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                    }`}\r\n                                  style={iconColor ? { color: iconColor } : {}}\r\n                                  color={iconColor ? iconColor : undefined}\r\n                                  \r\n                                />\r\n                                </button>\r\n                                \r\n                              </motion.div>\r\n                            )\r\n                          ) : null}\r\n\r\n                          {displayThumbnailIcon ? (\r\n                            <motion.div>\r\n                              <button\r\n                               onClick={() => {\r\n                                setShowThumbnails(!showThumbnails)\r\n                              }}>\r\n                              <GridFill\r\n                                size={24}\r\n                                className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                  }`}\r\n                                style={iconColor ? { color: iconColor } : {}}\r\n                                color={iconColor ? iconColor : undefined}\r\n                               \r\n                              />\r\n                              </button>\r\n                              \r\n                            </motion.div>\r\n                          ) : null}\r\n\r\n                          {shouldDisplayMagnifyingGlassIcon() ? (\r\n                            <motion.div>\r\n                              <button\r\n                                onClick={() => initMagnifyingGlass()}\r\n                              >\r\n                              <Search\r\n                                size={24}\r\n                                className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                  }`}\r\n                                style={iconColor ? { color: iconColor } : {}}\r\n                                color={iconColor ? iconColor : undefined}\r\n                              />\r\n                              </button>\r\n                              \r\n                            </motion.div>\r\n                          ) : null}\r\n\r\n                          {shouldDisplaySlideshowIcon() ? (\r\n                            <motion.div className={styles.slideshowPlayBtn}>\r\n                              {isSlideshowPlaying ? (\r\n                                <button onClick={() => {\r\n                                  isSlideshowPlaying\r\n                                    ? stopSlideshow()\r\n                                    : playSlideshow()\r\n                                }}>\r\n                                <PauseCircleFill\r\n                                  size={24}\r\n                                  className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                    }`}\r\n                                  style={iconColor ? { color: iconColor } : {}}\r\n                                  color={iconColor ? iconColor : undefined}\r\n                                  \r\n                                />\r\n                                </button>\r\n                                \r\n                              ) : (\r\n                                <button onClick={() => {\r\n                                  isSlideshowPlaying\r\n                                    ? stopSlideshow()\r\n                                    : playSlideshow()\r\n                                }}>\r\n                                  <PlayCircleFill\r\n                                  size={24}\r\n                                  className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                    }`}\r\n                                  style={iconColor ? { color: iconColor } : {}}\r\n                                  color={iconColor ? iconColor : undefined}\r\n                                  \r\n                                />\r\n                                </button>\r\n                                \r\n                              )}\r\n                            </motion.div>\r\n                          ) : null}\r\n                        </div>\r\n                      )}\r\n                      <motion.div  className={`${styles.closeIcon} ${props.showControls == false ? styles.mlAuto : \"\"}`}>\r\n                        <button id=\"closeBtn\" className={styles.closeButton}\r\n                        onClick={() => {\r\n                          closeModal()\r\n                        }}>\r\n                          <XLg\r\n                          id=\"closeIcon\"\r\n                            size={24}\r\n                            className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                              }`}\r\n                            color={iconColor ? iconColor : undefined}\r\n                            style={iconColor ? { color: iconColor } : {}}\r\n                          />\r\n                        </button>\r\n                        \r\n                      </motion.div>\r\n                    </section>\r\n                    {displayArrows() ?\r\n\r\n                      <div>\r\n                        <div\r\n                          className={\r\n                            rightArrowStyle\r\n                              ? `${styles.next1} ${getArrowStyle()} imageModal`\r\n                              : \"imageModal\"\r\n                          }\r\n                          style={rightArrowStyle}\r\n                          onClick={() => {\r\n                            nextSlide()\r\n                          }}\r\n                        >\r\n                          {nextArrowElem ? nextArrowElem :\r\n                            <span className={`${props.rightArrowClassname ? props.rightArrowClassname : \"\"}`}>&#10095;</span>\r\n                          }\r\n                        </div>\r\n                        <div\r\n                          className={\r\n                            leftArrowStyle\r\n                              ? `${styles.prev1} ${getArrowStyle()} imageModal`\r\n                              : \"imageModal\"\r\n                          }\r\n                          style={leftArrowStyle}\r\n                          onClick={() => {\r\n                            prevSlide()\r\n                          }}\r\n                        >\r\n                          {prevArrowElem ? prevArrowElem :\r\n                            <span className={`${props.leftArrowClassname ? props.leftArrowClassname : \"\"}`}>&#10094;</span>\r\n                          }\r\n                        </div>\r\n                      </div>\r\n                      : null\r\n                    }\r\n\r\n                    <AnimatePresence initial={false} custom={direction}>\r\n\r\n                      <div \r\n                       className={`${showThumbnails\r\n                        ? styles.slideshowInnerContainerThumbnails\r\n                        : ''\r\n                          } ${styles.embla} ${isImageCaption() ? styles.slideImageAndCaption : ''\r\n                          } \r\n                          ${props.fullScreen\r\n                            ? styles.slideshowInnerContainerFullScreen\r\n                            : styles.slideshowInnerContainer\r\n                          }  `}>\r\n                          <div className={styles.embla__viewport} ref={showModal ? emblaRef : null}>\r\n                            <div className={styles.embla__container}>\r\n\r\n                               {regularImgPaneNodes}\r\n\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                      {displayLoader == true && !isHTMLVideo(slideIndex) ? (\r\n                        <span\r\n                          key='loader'\r\n                          className={`${styles.loader\r\n                            } ${getLoaderThemeClass()}`}\r\n                        ></span>\r\n                      ) : null}\r\n                    </AnimatePresence>\r\n\r\n                    <div\r\n                      className={`${styles.thumbnailsOuterContainer} ${isImageCaption() ? styles.thumbnailsAndCaption : ''}`}\r\n                      style={\r\n                        isImageCaption()\r\n                          ? {\r\n                            backgroundColor: backgroundColor\r\n                          }\r\n                          : {}\r\n                      }\r\n                    >\r\n                      {isImageCaption() ? (\r\n                        <div className={`${styles.imgTitleContainer} imageModal`}>\r\n                          <p\r\n                            className={`${styles.imgTitle}`}\r\n                            key={'imgCaption' + slideIndex}\r\n                            style={\r\n                              props.captionStyle\r\n                                ? props.captionStyle\r\n                                : { color: textColor }\r\n                            }\r\n                          >\r\n                            {getImageCaption()}\r\n                          </p>\r\n                        </div>\r\n                      ) : null}\r\n\r\n                      <AnimatePresence initial={animatedThumbnails}>\r\n                        {showThumbnails !== false && (\r\n                          <motion.div\r\n                            initial={'hidden'}\r\n                            exit={'hidden'}\r\n                            animate={'visible'}\r\n                            style={\r\n                              imagesLoaded ? {} : { display: 'displayHidden' }\r\n                            }\r\n                            transition={{\r\n                              type: 'spring',\r\n                              duration: 0.75\r\n                            }}\r\n                            variants={thumbnailVariants}\r\n                            className={`${styles.thumbnails} ${isImageCaption()\r\n                                ? styles.thumbnailsWithCaption\r\n                                : ''\r\n                              }`}\r\n                          >\r\n                              \r\n                            <div className={`${styles.embla_thumbs} ${styles.thumbnails}`}>\r\n                            <div className={styles.embla_thumbs__viewport} ref={emblaThumbsRef}>\r\n                              <div className={styles.embla_thumbs__container}>\r\n                              {frameworkID == 'next' &&\r\n                                props.images\r\n                                ? props.images.map((img, index) => (\r\n                                  getImageThumbnail(img, index, true)\r\n                                ))\r\n                                : // Not Next.js\r\n                                images.map((img, index) => (\r\n                                  getImageThumbnail(img, index, false)\r\n                                ))}\r\n                          \r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                          \r\n                          </motion.div>\r\n                        )}\r\n                      </AnimatePresence>\r\n                    </div>\r\n                  </div>\r\n                </motion.div>\r\n              </Div100vh>\r\n            </Portal>\r\n          )}\r\n        </AnimatePresence>\r\n      </AnimateSharedLayout>\r\n    </div>\r\n  </div>\r\n\r\n}\r\n)","import React, { useEffect, useState, useRef } from 'react'\r\nimport { SlideshowLightbox } from './SlideshowLightbox';\r\n\r\nconst themes: any = {\r\n  day: {\r\n    background: 'white',\r\n    iconColor: 'black',\r\n    thumbnailBorder: 'solid transparent 2px',\r\n    textColor: 'black'\r\n  },\r\n  night: {\r\n    background: '#151515',\r\n    iconColor: 'silver',\r\n    thumbnailBorder: 'solid rgb(107, 133, 206)  2px',\r\n    textColor: 'silver'\r\n  },\r\n  lightbox: {\r\n    background: 'rgba(12, 12, 12, 0.93)',\r\n    iconColor: 'silver',\r\n    thumbnailBorder: 'solid rgb(107, 133, 206) 2px',\r\n    textColor: 'silver'\r\n  }\r\n}\r\nconst defaultTheme = \"lightbox\";\r\n\r\nexport const AnimImage = (props) => {\r\n  const [backgroundColor, setBackgroundColor] = useState(props.backgroundColor ? props.backgroundColor : themes[defaultTheme].background);\r\n\r\n  const [iconColor, setIconColor] = useState(props.iconColor ? props.iconColor : themes[defaultTheme].iconColor);\r\n\r\n  const [fullScreen, setFullScreen] = useState(props.fullScreen ? props.fullScreen : false);\r\n\r\n  const [modalCloseOption, setModalCloseOption] = useState(props.modalClose ? props.modalClose : \"default\");\r\n\r\n  const [disableZoom, setDisableZoom] = useState(\r\n    props.disableImageZoom ? props.disableImageZoom : false\r\n  )\r\n\r\n  const [imageRoundedBorder, setImageRoundedBorder] = useState(\r\n    props.roundedImages ? props.roundedImages : false\r\n  )\r\n\r\n  const [displayFullScreenIcon, setDisplayFullScreenIcon] = useState(\r\n    props.showFullScreenIcon ? props.showFullScreenIcon : true\r\n  )\r\n\r\n  const [className, setClassName] = useState(\r\n    props.className ? props.className : \"\"\r\n  )\r\n\r\n  const [imgWrapperClass, setImgWrapperClass] = useState(\r\n    props.wrapperClassName ? props.wrapperClassName : \"\"\r\n  )\r\n\r\n  const [lightboxImgClassName, setLightboxImgClassName] = useState(\r\n    props.lightboxImgClass ? props.lightboxImgClass : \"\"\r\n  )\r\n  \r\n  const [imgClass, setImgClass] = useState(\r\n    props.className ? props.className : \"\"\r\n  )\r\n\r\n  const [displayMagnificationIcons, setDisplayMagnificationIcons] = useState(\r\n    props.showMagnificationIcons ? props.showMagnificationIcons : true\r\n  )\r\n\r\n  const [displayControls, setDisplayControls] = useState(\r\n    props.showControls ? props.showControls : true\r\n  )\r\n\r\n  const [showDownloadBtn, setShowDownloadBtn] = useState(\r\n    props.downloadImages ? props.downloadImages : false\r\n  )\r\n\r\n  const [isRTL, setIsRTL] = useState(props.rtl ? props.rtl : false)\r\n\r\n  const [lightboxIdentifier, setLightboxIdentifier] = useState(\r\n    props.lightboxIdentifier ? props.lightboxIdentifier : false\r\n  )\r\n\r\n  const [frameworkID, setFrameworkID] = useState(\r\n    props.framework ? props.framework : ''\r\n  )\r\n\r\n  const [images, setImages] = useState<any>([])\r\n\r\n  // const [displayLoader, setDisplayLoader] = useState(\r\n  //   props.showLoader ? props.showLoader : false\r\n  // )\r\n\r\n  // const [textColor, setTextColor] = useState(\r\n  //   props.textColor ? props.textColor : themes[defaultTheme].textColor\r\n  // )\r\n\r\n\r\n  const [state, setState] = React.useState();\r\n\r\n  const initProps = () => {\r\n    if (props.showControls != undefined) {\r\n      setDisplayControls(props.showControls)\r\n      setDisableZoom(props.showControls)\r\n      \r\n      if (props.showControls == false) {\r\n          setDisplayMagnificationIcons(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (props.theme) {\r\n      if (themes[props.theme]) {\r\n        setBackgroundColor(themes[props.theme].background);\r\n        setIconColor(themes[props.theme].iconColor);\r\n      }\r\n    }\r\n\r\n    if (props.image && images.length == 0 && frameworkID == \"next\") {\r\n      let imgs: any = [];\r\n      imgs.push(props.image) \r\n      setImages(imgs);\r\n    }\r\n    else {\r\n      setImages(null)\r\n    }\r\n\r\n    return () => {\r\n    };\r\n\r\n  }, [state]);\r\n\r\n  const getImage = () => {\r\n    if (frameworkID == \"next\" && props.children != undefined) {\r\n      return props.children\r\n    }\r\n    else if (frameworkID != \"next\") {\r\n      return (\r\n        <img src={props.image.src} alt={props.image.title} className={`${className}`} />\r\n      )\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isMounted = true\r\n    if (isMounted) initProps()\r\n\r\n    return () => {\r\n      isMounted = false\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <SlideshowLightbox\r\n      showSlideshowIcon={false} \r\n      showThumbnails={false}\r\n      backgroundColor={backgroundColor} \r\n      iconColor={iconColor} \r\n      theme={props.theme} \r\n      lightboxIdentifier={lightboxIdentifier}\r\n      fullScreen={fullScreen} \r\n      showMagnificationIcons={displayMagnificationIcons}\r\n      showFullScreenIcon={displayFullScreenIcon} \r\n      downloadImages={showDownloadBtn}\r\n      roundedImages={imageRoundedBorder} \r\n      disableImageZoom={disableZoom}\r\n      showArrows={false} \r\n      showThumbnailIcon={false} \r\n      showControls={displayControls}\r\n      modalClose={modalCloseOption}\r\n      lightboxImgClass={lightboxImgClassName}\r\n      imgClassName={imgClass}\r\n      imageComponent={true}\r\n      framework={frameworkID}\r\n      // className={className}\r\n      imgWrapperClassName={imgWrapperClass}\r\n      images={images}>\r\n\r\n      {getImage()}\r\n    \r\n    </SlideshowLightbox>\r\n  );\r\n\r\n}","import * as React from 'react'\nimport { useState, useEffect, useRef } from 'react'\nimport { motion, AnimatePresence, AnimateSharedLayout } from 'framer-motion'\nimport styles from './styles.module.css'\nimport axios from \"axios\";\nimport {\n  wrapNums,\n  getVideoHeight,\n  getVideoWidth,\n  shouldAutoplay,\n  openFullScreen,\n  closeFullScreen,\n} from './utility'\nimport {SlideshowLightbox} from \"./SlideshowLightbox\"\nimport {AnimImage} from \"./AnimImage\"\n\nexport const initLightboxJS = (licenseKey: string, plan_type: string) => {\n  var body = {\n    license_key: licenseKey,\n    plan_type: plan_type,\n  };\n\n  axios.post('https://lightboxjs-server.herokuapp.com/license', body)\n    .then(function (response) {\n\n      let licenseKeyValid = response.data.license_valid;\n\n      if (!licenseKeyValid) {\n        console.warn(\"Lightbox.js: Invalid license key specified, a valid license key must be provided.\")\n      }\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n};\n\n\nexport { SlideshowLightbox, AnimImage as Image }"],"names":["wrapNums","minNum","maxNum","v","rangeSize","shouldAutoplay","elem","type","autoPlay","getVideoHeight","videoHeight","getVideoWidth","videoWidth","thumbnailVariants","visible","opacity","y","hidden","themes","day","background","iconColor","thumbnailBorder","textColor","night","lightbox","inactiveThumbnailBorder","defaultTheme","mobileWidth","SlideshowLightbox","React","props","ref","useImperativeHandle","reset","initImages","createCustomThumbnailBorder","_useState","useState","_useState$","imgSlideIndex","direction","setImgSlideIndex","_useState2","showModal","setShowModal","_useState3","isSlideshowPlaying","setIsSlideshowPlaying","_useState4","emblaReinitialized","setEmblaReinitialized","_useState5","images","setImages","_useState6","previewImageElems","setPreviewImageElems","slideIndex","length","_useState7","loop","startIndex","active","reactSwipeOptions","setReactSwipeOptions","initialThumbnailOptions","containScroll","dragFree","_useState8","thumbnailSwipeOptions","setThumbnailSwipeOptions","_useState9","carouselReady","setCarouselReady","_useState10","zoomedIn","setZoomedIn","_useState11","isOpen","setIsOpen","_useState12","prevFocusedElem","setPrevFocusedElem","_useState13","animationEntered","setAnimationEntered","_useState14","magnifyingGlass","magnifyingGlassFeature","_useState15","disableImageZoom","disableZoom","setDisableZoom","_useState16","slideshowInterval","_useState17","rightArrowStyle","_useState18","leftArrowStyle","_useState19","roundedImages","isRounded","setIsRounded","_useState20","showControls","setShowControls","_useState21","showFullScreenIcon","displayFullScreenIcon","setDisplayFullScreenIcon","_useState22","showThumbnailIcon","displayThumbnailIcon","setDisplayThumbnailIcon","_useState23","showSlideshowIcon","displaySlideshowIcon","setDisplaySlideshowIcon","_useState24","showMagnificationIcons","displayMagnificationIcons","setDisplayMagnificationIcons","_useState25","nextArrow","nextArrowElem","_useState26","imageComponent","isImageComponent","_useState27","prevArrow","prevArrowElem","_useState28","modalClose","modalCloseOption","_useState29","downloadImages","showDownloadBtn","_useState30","rtl","isRTL","_useState31","framework","frameworkID","_useState32","lightboxIdentifier","_useState33","fullScreen","imageFullScreen","_useState34","licenseKey","_useState35","showLoader","displayLoader","setDisplayLoader","_useState36","backgroundColor","setBackgroundColor","_useState37","setIconColor","_useState38","setTextColor","_useState39","useCoverMode","coverMode","_useState40","_useState41","showThumbnails","setShowThumbnails","_useState42","animateThumbnails","animatedThumbnails","_useState43","imgAnimation","setImgAnimation","_useState44","arrowStyle","_useState45","YTVideoCurrentlyPlaying","setYTVideoCurrentlyPlaying","_useState46","width","setWidth","_useState47","isBrowserFullScreen","setIsBrowserFullScreen","_useState48","enableMagnifyingGlass","setMagnifyingGlass","_useState49","imagesLoaded","setImagesLoaded","imageRef","useRef","_useState50","zoomIdx","setZoomIdx","_useState51","imgContainHeight","setImgContainHeight","_useState52","imgContainWidth","setImgContainWidth","_useState53","isInit","setIsInit","zoomReferences","videoReferences","btnRef","_useState54","videoElements","setVideoElements","isMobile","getLoaderThemeClass","theme","styles","night_loader","day_loader","_useEmblaCarousel","useEmblaCarousel","emblaRef","emblaApi","_useEmblaCarousel2","emblaThumbsRef","emblaThumbsApi","scrollPrev","useCallback","scrollNext","variants","inactive","isImageCaption","caption","displayDownloadBtn","isVideo","handleWindowResize","window","innerWidth","shouldDisplayMagnifyingGlassIcon","getImageStyle","styleObject","shouldDisplaySlideshowIcon","undefined","thumbnailClick","index","initLoader","setCurrentSlide","checkModalClick","e","modals","document","getElementsByClassName","arr_modals","Array","from","i","clickInside","contains","target","closeModal","getRTLIndex","img_gallery_length","getElementById","openFullScreen","initFullScreenChangeEventListeners","exitFullScreenHandler","closeFullScreen","removeFullScreenChangeEventListeners","exitFullScreen","updateImageSlideshow","newDirection","displayArrows","showArrows","newIndex","loaded","getImageCaption","getArrowStyle","dark_icon","light_icon","getIconStyle","dark_header_icon","light_header_icon","scrollTo","dispatchOpenEvent","onOpen","dispatchCloseEvent","onClose","dispatchNextImgEvent","onNext","dispatchPrevImgEvent","onPrev","focus","openModal","num","reInit","selectedScrollSnap","setItemLoaded","map","img","_extends","setImagesItemLoaded","resetMedia","slide_index","resetVideo","resetImage","initSlide","newSlideIndex","wrap_slide_index","nextSlide","prevSlide","setThumbnailStartIndex","thumbnailSwipeOptionConfig","openModalWithSlideNum","reactSwipeOptionConfig","saveImage","original","saveAs","src","playSlideshow","stopSlideshow","current","pause","pauseVideo","getImageThumbnail","isNextJS","key","className","embla_thumbs__slide","thumbnail","getThumbnailImgSrcNext","getThumbnailImgSrc","alt","onLoad","style","border","onClick","initMagnifyingGlass","resetTransform","img_src","isArray","isAnimImageComponent","initWrapperClassname","classNameStr","imgWrapperClassName","lightboxjs","initStyling","imageSlideElement","imageElem","embla__slide__img","fullScreenLightboxImg","lightbox_img","maxWidthFull","maxWidthWithoutMagnifier","loading","id","render","imgSlide","img_link","_images$index$src","coverImageInLightbox","isPanningDisabled","getLightboxElem","videoSlideElement","isPictureElement","elem_metadata","Object","keys","format","srcSet","picture","useEffect","isHTMLVideo","videoElem","videoOuterContainer","YouTube","videoId","videoID","el","iframeClassName","ytVideo","title","opts","height","playerVars","autoplay","onReady","event","videoElems","onPlay","onPause","onEnd","onError","onStateChange","onPlaybackRateChange","onPlaybackQualityChange","htmlVideo","htmlVideoOuterContainer","cursorPointer","lightboxVideo","controls","videoSrc","initZoom","state","scale","regularImgPaneNodes","apply","_","Magnifier","magnifyWrapper","mgShowOverflow","embla__slide","TransformWrapper","onWheel","wheelEvent","disabled","panning","onZoom","onZoomStop","onTransformed","onPinchingStop","centerZoomedOut","initialScale","alignmentAnimation","sizeX","sizeY","TransformComponent","wrapperStyle","maxWidth","margin","contentStyle","marginLeft","marginRight","display","slideshow_img_fullscreen","slideshow_img","lightboxImgClass","initImageDimensions","ratio","naturalWidth","naturalHeight","addEventListener","removeEventListener","initEventListeners","isBrowser","removeEventListeners","removeOnSelectListener","setReducedMotion","mediaQuery","matches","checkAndInitReducedMotion","reducedMotionMediaQuery","matchMedia","initPropsForControlIcons","initProps","useInterval","lightbox_elem","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","webkitExitFullscreen","msExitFullscreen","initRTLImages","imagesMetadataCopy","reverse","imagesRTLCopy","isMounted","updateImages","filterImages","filter","cover","children","img_gallery","querySelectorAll","originalImageAttr","img_elements","_loop","attr_val","getAttribute","classList","add","original_img_src","push","tagName","corresponding_img_item","img_alt","showAllImages","imgArray","imgs","k","img_elem","img_obj","dispatchSlideSelectEvents","prevIndex","onSelect","prevSlideIndex","previousScrollSnap","onReinit","handleResize","entry","rootNode","useResizeObserver","off","draggable","on","displayedImages","slideNum","open","startingSlideIndex","console","error","imgClassName","img_index","AnimateSharedLayout","AnimatePresence","initial","exitBeforeEnter","Portal","Div100vh","motion","div","slideshowAnimContainer","animate","exit","transition","duration","onAnimationComplete","animEntered","_document$getElementB","prevFocusedElement","activeElement","lightboxContainer","tabIndex","role","iconsHeader","color","KeyHandler","keyValue","code","onKeyHandle","preventDefault","stopPropagation","zoomIn","ZoomIn","size","lightboxjs_icon","zoomOut","ZoomOut","Download","FullscreenExit","Fullscreen","GridFill","Search","slideshowPlayBtn","PauseCircleFill","PlayCircleFill","closeIcon","mlAuto","closeButton","XLg","next1","rightArrowClassname","prev1","leftArrowClassname","custom","slideshowInnerContainerThumbnails","embla","slideImageAndCaption","slideshowInnerContainerFullScreen","slideshowInnerContainer","embla__viewport","embla__container","loader","thumbnailsOuterContainer","thumbnailsAndCaption","imgTitleContainer","imgTitle","captionStyle","thumbnails","thumbnailsWithCaption","embla_thumbs","embla_thumbs__viewport","embla_thumbs__container","AnimImage","imageRoundedBorder","wrapperClassName","imgWrapperClass","lightboxImgClassName","imgClass","displayControls","setDisplayControls","_React$useState","image","getImage","initLightboxJS","plan_type","body","license_key","axios","post","then","response","licenseKeyValid","data","license_valid","warn","log"],"mappings":"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"}